{% extends 'main/base.html' %} {% block content %} {% load static %}

<!--SEARCH BOX-->
<div class="row" style="margin: 0 auto;">
  <div class="col"></div>
  <div class="col-9 card border-0 shadow mb-4">
    <div class="card-body">
      <!-- <div class="query_box"> -->
      <ul
        class="nav nav-tabs md-tabs nav-justified"
        id="myTabMD"
        role="tablist"
      >
        <li class="nav-item">
          <a
            class="nav-link active"
            id="tieba_search"
            data-toggle="tab"
            href="#tieba_searchbox"
            role="tab"
            aria-controls="tieba"
            aria-selected="true"
            >Search for Tieba</a
          >
        </li>
        <li class="nav-item">
          <a
            class="nav-link"
            id="weibo_search"
            data-toggle="tab"
            href="#weibo_searchbox"
            role="tab"
            aria-controls="weibo"
            aria-selected="false"
            >Crawl Weibo User</a
          >
        </li>
      </ul>
      <div class="tab-content card pt-5 " id="myTabContentMD">
        <div
          class="tab-pane active"
          id="tieba_searchbox"
          role="tabpanel"
          aria-labelledby="tieba_search"
        >
          <form
            id="tieba_form"
            name="tieba_form"
            action="{% url 'main:home' %}"
            method="get"
          >
            <input
              type="text"
              name="kw"
              placeholder="Enter keywords"
              class="form-control"
            /><br />

            <input
              type="submit"
              value="Search for available Tieba"
              class="btn btn-success"
            /><br /><br />
          </form>

          {% if history_tieba %}
          <form action="{% url 'main:home'%}" method="get">
            <p>
              <i>Or search by previous tieba crawled instead:</i>
              <select
                name="tieba"
                class="form-control"
                style="display:inline-block;"
                onchange="this.form.submit()"
              >
                <option disabled selected value>
                  -- select an option --
                </option>
                {% for tieba in history_tieba %}
                <option value="{{ tieba }}">{{ tieba }}</option>
                {% endfor %}
              </select>
            </p>
          </form>
          {% endif %}
        </div>
        <div
          class="tab-pane"
          id="weibo_searchbox"
          role="tabpanel"
          aria-labelledby="weibo_search"
        >
          <form
            id="weibo_form"
            name="weibo_form"
            onsubmit="return validate()"
            action="{% url 'main:weibo' %}"
            method="post"
          >
            <input
              type="text"
              name="keyword"
              placeholder="Enter Weibo username"
              class="form-control"
            /><br />

            <input
              type="submit"
              value="Crawl User's Data"
              class="btn btn-success"
            />

            <br /><br />
          </form>
          <div class="alert alert-danger" role="alert">
            <p>
              <b>Important!</b> Please ensure that the same task (i.e. same
              weibo, same date range) is <b>not</b> running concurrently on
              multiple computers.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- </div> -->
  <div class="col"></div>
</div>


<!--DOWNLOADING-->
{% include 'main/downloading_message.html' %}
<script src="{% static "main/js/search.weibo.js" %}"></script>
<script>
  $(function() {
    $(".nav-tabs a").click(function(e) {
      e.preventDefault();
      //var contents = $(".myTabContentMD").children.removeClass("active");
      $(".tab-pane").removeClass("active");
      var pane_id = $(this).attr("href");
      $(pane_id).addClass("active");
    });
  });
  
</script>

{% endblock %}
